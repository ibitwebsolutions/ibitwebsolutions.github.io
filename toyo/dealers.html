<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Toyo Tires</title>
    <link type="text/css" rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="scroll">
	<header>
		<div class="container">
			<div class="row">
				<div class="col-sm-3">
					<div class="logo"><a href="/toyo/index.html"><img src="assets/img/logo.png" alt=""></a></div>
				</div>
				<div class="col-sm-9">
					<div class="col-sm-12">
						<div class="top-menu">
							<ul>
								<li><a href="#"><img src="assets/img/tireshakk.png" alt="TIRESHAKK"></a></li>
								<li><a href="#"><img src="assets/img/fb-blue.png" alt="TIRESHAKK FACEBOOK"></a></li>
								<li><a href="#"><img src="assets/img/ig-blue.png" alt="TIRESHAKK INSTAGRAM"></a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-12">
						<div id="menu">
							<ul>
								<li><a href="/toyo/about.html">about us</a></li>
								<li><a href="/toyo/tires.html">tires</a></li>
								<li><a href="/toyo/dealers.html">dealers</a></li>
								<li><a href="/toyo/news.html">news</a></li>
								<li><a href="/toyo/services.html">services</a></li>
								<li><a href="/toyo/contact.html">contact us</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	<section>
		<article>
			<div class="page">
				<div class="container">
					<div class="row">
						<div class="col-sm-12">
							<p class="page-title">Find a Dealer</p>
						</div>
					</div>
				</div>
				<div class="page-body">
					<div class="container">
						<div class="row">
							<div class="col-sm-4">
								<div class="col-xs-12">
									<div class="dealers-search">
										<div class="search-box">
											  <div class="autocomplete">
											    <input type="text" id="dealers" name="dealers" placeholder="Search Dealers" data-add="" data-coor="" data-phone="">
											  </div>
										</div>

										<div class="search-result">
											<p id="branch"></p>
											<p id="address"></p>
											<p id="phone"></p>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-8">
								<div id="map"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</article>
	</section>
	<footer></footer>
	
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>
	<script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="assets/js/index.js"></script>
	<script type="text/javascript" src="assets/js/data.js"></script>
	<script>
			// field search auto complete
			autocomplete(document.getElementById("dealers"), dealers);

			var directionsDisplay, directionsService;
			var map;
			var firstPoint, lastPoint, firstPointInput;
			var myLat, myLong;
			var geoCoder;
			var currLoc = navigator.geolocation;
			currLoc.getCurrentPosition(initialize, failure);
					
			function initialize(position) {
				
				// Service And Render in Get Direction
				directionsService = new google.maps.DirectionsService();
				directionsDisplay = new google.maps.DirectionsRenderer();
				geoCoder = new google.maps.Geocoder();
				
				// Get Current Position
				myLat = position.coords.latitude;
				myLong = position.coords.longitude;
				
				// First Point
				firstPoint = new google.maps.LatLng(myLat, myLong);
				
				// Set Map And Marker
				var mapOptions = {
					zoom: 15,
					center: firstPoint
				}
				map = new google.maps.Map(document.getElementById('map'), mapOptions);
				var markerOptions = {
					position: firstPoint,
					map: map
				};
				var marker = new google.maps.Marker(markerOptions);
				directionsDisplay.setMap(map);

			}

			function failure(){

			}
					
			function calculateRoute(first_location_input, lat, long) {
				var lastPoint = new google.maps.LatLng(lat, long);
				if (first_location_input) {
					geoCoder.geocode( {
						'address' : first_location_input
					}, function (results, status) {
							var first_location_latitude = results[0].geometry.location.lat(),
								first_location_longitude = results[0].geometry.location.lng(),
								firstPoint_input = new google.maps.LatLng(first_location_latitude, first_location_longitude);
								var request = {
									origin: firstPoint_input,
									destination: lastPoint,
									travelMode: 'DRIVING'
								}
								directionsService.route(request, function(result, status) {
									directionsDisplay.setDirections(result);
								});
					});
				} else {
					var request = {
						origin: firstPoint,
						destination: lastPoint,
						travelMode: 'DRIVING'
					}
					directionsService.route(request, function(result, status) {
						directionsDisplay.setDirections(result);
					});
				}
			}

			function exec(){
				document.getElementById('branch').innerHTML = document.getElementById('dealers').value;
				document.getElementById('address').innerHTML = document.getElementById('dealers').getAttribute('data-add');
				document.getElementById('phone').innerHTML = document.getElementById('dealers').getAttribute('data-phone');
				$('.search-result').css({"display":"block"});
				var getvalue_firstPoint = firstPoint,
					getvalue_lastPoint = document.getElementById('dealers').getAttribute('data-coor'),
					coordinates = getvalue_lastPoint.split(',');
				calculateRoute(getvalue_firstPoint, coordinates[0], coordinates[1]);
			}
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize" async defer></script>
</body>
</html>